{
  "Id": 15,
  "Name": "ortome - Als Dan Bijwerken (2) ",
  "Description": "Op basis van externe factoren werken we de Top10 bij voordsat de shoppingcart getoond gaat worden",
  "IsDebug": false,
  "ActionList": {
    "Id": 69,
    "EventName": "Event",
    "Actions": [
      {
        "Id": 127,
        "Description": "ALS top10 heeft Vegan Vitamine D en Vitamine D en Calcium + Vitamine D DAN SELECT Vegan Vitamine D en DESELECT Vitamine D en Calcium + Vitamine D",
        "ActionType": "RunSql",
        "OrderIndex": 0,
        "ActionParameters": [
          {
            "Id": 872,
            "Name": "ConnectionString",
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 873,
            "Name": "QueryTimeout",
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 874,
            "Name": "SqlQuery",
            "Value": "/****** Als resultaat TRUE is , dan moet de cart bijgewerkt worden  ******/\nSELECT CASE WHEN Count(q1.id) > 3 then 'true' else 'false' end as Resultaat FROM\n(\nSELECT DISTINCT app.ortomo_Preparaat.Id\nFROM            app.ortomo_ShoppingCartDetail INNER JOIN\n                         app.ortomo_Preparaat ON app.ortomo_ShoppingCartDetail.Id = app.ortomo_Preparaat.Id\nWHERE app.ortomo_Preparaat.Id IN (4, 3, 38)\n  AND app.ortomo_ShoppingCartDetail.ShoppingCart = @ShoppingCart\n) Q1",
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 875,
            "Name": "BindTokens",
            "Value": [
              {
                "value": "[ShoppingCart]",
                "$$hashKey": "object:52",
                "name": "ShoppingCart"
              }
            ],
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 876,
            "Name": "OutputTokenName",
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 877,
            "Name": "ExtractColumns",
            "Value": [
              {
                "value": "[Check1]",
                "$$hashKey": "object:58",
                "name": "Resultaat"
              }
            ],
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 878,
            "Name": "OnError",
            "Value": {
              "Id": 74,
              "EventName": "OnError",
              "Actions": []
            },
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 879,
            "Name": "ShowErrors",
            "IsExpression": false,
            "ActionId": 127,
            "OrderIndex": 0,
            "SubParameters": []
          }
        ],
        "DiagramUID": "Activity_0kvkgsh"
      },
      {
        "Id": 128,
        "Condition": "[Check1]=='true'",
        "ActionType": "RunSql",
        "OrderIndex": 1,
        "ActionParameters": [
          {
            "Id": 880,
            "Name": "ConnectionString",
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 881,
            "Name": "QueryTimeout",
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 882,
            "Name": "SqlQuery",
            "Value": "UPDATE app.ortomo_ShoppingCartDetail\nSET Quantity = 0\nWHERE ShoppingCart=@ShoppingCart and (Preparaat = 'Vitamine D3' or Preparaat = 'Calcium en Vitamine D3')",
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 883,
            "Name": "BindTokens",
            "Value": [
              {
                "value": "[ShoppingCart]",
                "$$hashKey": "object:52",
                "name": "ShoppingCart"
              }
            ],
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 884,
            "Name": "OutputTokenName",
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 885,
            "Name": "ExtractColumns",
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 886,
            "Name": "OnError",
            "Value": {
              "Id": 75,
              "EventName": "OnError",
              "Actions": []
            },
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 887,
            "Name": "ShowErrors",
            "IsExpression": false,
            "ActionId": 128,
            "OrderIndex": 0,
            "SubParameters": []
          }
        ],
        "DiagramUID": "Activity_1qc8rp8"
      }
    ]
  },
  "CreatedBy": "Hans Lenting",
  "CreatedOn": "2021-03-09T21:21:25.9785255+01:00",
  "LastModifiedBy": "Hans Lenting",
  "LastModifiedOn": "2021-03-09T21:40:57.0001185+01:00",
  "InputFields": [
    {
      "Id": 83,
      "Name": "ShoppingCart",
      "InputType": "Integer",
      "WorkflowId": 15,
      "IsDeleted": false
    },
    {
      "Id": 84,
      "Name": "MijnTest",
      "InputType": "Integer",
      "WorkflowId": 15,
      "IsDeleted": false
    }
  ],
  "OutputFields": [
    {
      "Value": "[Check1]",
      "Id": 87,
      "Name": "Check1",
      "InputType": "Text",
      "WorkflowId": 15,
      "IsDeleted": false
    }
  ]
}